<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Redr Disaster Simulator</title>

    <!-- Bootstrap core CSS -->
    <link href="styles/disaster-sim-style.css" type="text/css" rel="stylesheet">

</head>

<body>

<script src="/socket.io/socket.io.js"></script>
<script src="js/jquery.js"></script>
<script src="js/run-simulation.js"></script>
<script src="js/PDFObject/pdfobject.js"></script>

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light bg-light static-top "id="header">
    <!--Colour Changer-->
    <script>
        $("#header").load("header.html", function (response,
                                                   status, http){
            document.getElementById("colourChooser").setAttribute("value", document.cookie);
        });
        document.documentElement.style.setProperty("--main-color", document.cookie);
    </script>
</nav>

<!-- Page Content -->
<div class="container">
    <div class="row">
        <div class="col-lg-12 text-center" id="mainContent">


            <div id="eventOverlay" onclick="displayPDFOff()"> 
                <div id="overlayPdf"></div>
                <script src="js/PDFObject/pdfobject.js"></script>
                <script>
                    function onSelect(properties){
                        //console.log(items);
                        //console.log(properties.items[0]);
                        //console.log(items[properties.items[0]].location);
                        //PDFObject.embed(items[properties.items[0]].location, "#overlayPdf");
                        document.getElementById("eventOverlay").style.display = "block";
                    }
                </script>

            </div>

            <!--Scenario Title Gets Updated In Socket-->
            <div class="scenarioTitle"></div>


            <!-- timeline mode-->
            <select id="groupToggle" onchange="replaceTimeline(this.value)"> <!-- loads selected timeline when selected-->
                <option value="0">Group View</option>
                <option value="1">Full View</option>
            </select>
            
            <!--Timeline-->
            <div id="timeline" class="timeline">

                <div id="visualization"></div><!-- container for timeline -->

                <script src="js/vis-4.21.0/dist/vis.js"></script>
                <link href="js/vis-4.21.0/dist/vis.css" rel="stylesheet" type="text/css"/>
                <script type="text/javascript" src="js/timelineComponents.js"></script>


                <script>//temp script for testing
                groups = new vis.DataSet([
                    {id: 1, content: 'Group 1'},
                    {id: 2, content: 'Group 2'},
                    {id: 3, content: 'Group 3'},
                    {id: 4, content: 'Group 4'}
                ]);

                items = new vis.DataSet([{
                id: 5,
                group: 4,
                content: 'item 5',
                start: '2019-01-03 00:00:00'
                }]);//temp ends here
                </script>

                <script type="text/javascript">//initialises timeline object
                    var container = document.getElementById('visualization');
                    var timeline = new vis.Timeline(container, items, groups, options);
                </script>



                <script>//functions for activating/disabling overlay
                    timeline.on('select', onSelect);



                    function replaceTimeline(mode){//deletes current timeline then calls loadTimeline
                    var elem = document.getElementById("visualization");
                    while (elem.firstChild) {
                        elem.removeChild(elem.firstChild);
                    }

                loadTimeline(mode);
            }
            
                    function loadTimeline(mode){//function loads timline javascript library from directory
                            if(mode == 0){
                                var timeline = new vis.Timeline(container, items, groups, options);
                                timeline.on('select', function (properties) {
                                    document.getElementById("eventOverlay").style.display = "block";
                                    //properties.items
                                });
                            } else{
                                var timeline = new vis.Timeline(container, items, options);
                                timeline.on('select', function on() {
                                    document.getElementById("eventOverlay").style.display = "block";
                                    //properties.items
                                });
                            }
                    }
                </script>

                

            </div>

        </div>
    </div>
</div>

<!-- Footer -->
<footer class="bg-light fixed-bottom" id="footer">
    <script>$("#footer").load("footer.html");</script>
</footer>




</body>

</html>
