<script>
    var name;
    var config = true;

    $(function () {


        //send name
        const socket = io();

        $('#message').submit(function (e) {


            e.preventDefault(); // prevents page reloading
            console.log($('#m').val());

            socket.emit('message', $('#m').val());
            return false;
        });
        socket.on('message', function(msg){
            $('#recieveList').append($('<li>').text(msg));
        });

        $('#ngoName').submit(function (e) {
            console.log("TEST");
            //e.preventDefault(); // prevents page reloading
            name = $('#input').val();
            socket.emit('join', $('#input').val());
            $(this).parent().remove();
            document.getElementById("heading").innerHTML = "NGO: " + name;
            document.getElementById("welcome").remove();
            config = false;
            console.log("namesent");



            //add chat box
            $("<div class='messages'>" + name +
                "<ul id='recieveList'></ul> " +
                "<form id='message' action=''/>" +
                "<input type='text' id='input'/>" +
                "<input type = 'submit' value='Send'/>" +
                "</form>" +
                "</div>"
            ).appendTo('body');


            //process chat

            $('message').submit(function (e) {
                //Send
                // e.preventDefault(); // prevents page reloading
                socket.emit('message', $('#input').val());
                $('#input').val('');
                return false;
            });
            socket.on('message', function (msg) {
                //Recieve
                $('#recieveList').append($('<li>').text(msg));
            });



        });

    });


</script>

<h1 id="heading">Trainee Landing</h1>
<p id="welcome">Please Specify Your NGO Name</p>

<div class="ngoNamefield">
    <form id="ngoName" action="">
        <input type="text" id="input"/>
        <input type = "submit" value="Send"/>
    </form>



</div>

<div class='messages'>
    <p> Messages Recieved: </p>
    <ul id='recieveList'></ul>
    <form id='message' action=''/>
    <input id='m'/>
    <button>Send</button>
    </form>
</div>


